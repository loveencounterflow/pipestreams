{
  "version": 3,
  "file": "spawn.js",
  "sourceRoot": "../..",
  "sources": [
    "src/tests/spawn.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n\n############################################################################################################\nCND                       = require 'cnd'\nrpr                       = CND.rpr\nbadge                     = 'PIPESTREAMS/TESTS/SPAWN'\nlog                       = CND.get_logger 'plain',     badge\ninfo                      = CND.get_logger 'info',      badge\nwhisper                   = CND.get_logger 'whisper',   badge\nalert                     = CND.get_logger 'alert',     badge\ndebug                     = CND.get_logger 'debug',     badge\nwarn                      = CND.get_logger 'warn',      badge\nhelp                      = CND.get_logger 'help',      badge\nurge                      = CND.get_logger 'urge',      badge\necho                      = CND.echo.bind CND\n#...........................................................................................................\nPATH                      = require 'path'\nFS                        = require 'fs'\nOS                        = require 'os'\nTAP                       = require 'tap'\n# TAP                       = require 'tape'\n#...........................................................................................................\nPS                        = require '../..'\n{ $, $async, }            = PS\n#...........................................................................................................\njr                        = JSON.stringify\n{ step, }                 = require 'coffeenode-suspend'\n\n\n#-----------------------------------------------------------------------------------------------------------\nTAP.test \"spawn 1\", ( T ) ->\n  # new_pushable              = require 'pull-pushable'\n  # source            = new_pushable()\n  #.........................................................................................................\n  on_error = ( error ) ->\n    warn '20191', error.message\n      # throw error\n  #.........................................................................................................\n  command           = 'ls -AlF'\n  source            = PS.spawn command, { on_error, cwd: '/tmp', }\n  on_stop           = PS.new_event_collector 'stop', -> T.end()\n  #.........................................................................................................\n  pipeline = []\n  pipeline.push source\n  pipeline.push PS.$watch ( data ) -> whisper rpr data\n  pipeline.push PS.$split()\n  # pipeline.push PS.$show title: '==='\n  pipeline.push PS.$collect()\n  pipeline.push PS.$watch ( lines ) -> help lines\n  pipeline.push on_stop.add PS.$drain()\n  #.........................................................................................................\n  PS.pull pipeline...\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\nTAP.test \"spawn 2\", ( T ) ->\n  probes_and_matchers = [\n    [\"xxx ; echo \\\"helo\\\" && exit 1\",\"CDDX\",{\"code\":1,\"signal\":null,\"comment\":\"error\"},\"helo\",\"/bin/sh: xxx: command not found\"]\n    [\"xxx ; echo \\\"helo\\\" && exit 0\",\"CDDX\",{\"code\":0,\"signal\":null,\"comment\":\"ok\"},\"helo\",\"/bin/sh: xxx: command not found\"]\n    [\"xxx ; echo \\\"helo\\\"\",\"CDDX\",{\"code\":0,\"signal\":null,\"comment\":\"ok\"},\"helo\",\"/bin/sh: xxx: command not found\"]\n    [\"xxx && echo \\\"helo\\\"\",\"CDX\",{\"code\":127,\"signal\":null,\"comment\":\"command not found\"},\"\",\"/bin/sh: xxx: command not found\"]\n    [\"exit 111\",\"CX\",{\"code\":111,\"signal\":null,\"comment\":\"error\"},\"\",\"\"]\n    [\"ls package.json && echo_to_stderr() { cat <<< \\\"$@\\\" 1>&2; }; echo_to_stderr what\",\"CDDX\",{\"code\":0,\"signal\":null,\"comment\":\"ok\"},\"package.json\",\"what\"]\n    [\"( >&2 echo \\\"error\\\" )\",\"CDX\",{\"code\":0,\"signal\":null,\"comment\":\"ok\"},\"\",\"error\"]\n    [\"echo_to_stderr() { cat <<< \\\"$@\\\" 1>&2; }; echo_to_stderr what; echo else; sleep 1; kill -9 $$\",\"CDDX\",{\"code\":137,\"signal\":\"SIGKILL\",\"comment\":\"SIGKILL\"},\"else\",\"what\"]\n    [\"kill -2 $$\",\"CX\",{\"code\":130,\"signal\":\"SIGINT\",\"comment\":\"SIGINT\"},\"\",\"\"]\n    [\"/dev/null\",\"CDX\",{\"code\":126,\"signal\":null,\"comment\":\"permission denied\"},\"\",\"/bin/sh: /dev/null: Permission denied\"]\n    [\"exit 130\",\"CX\",{\"code\":130,\"signal\":null,\"comment\":\"error\"},\"\",\"\"]\n    [\"bonkers\",\"CDX\",{\"code\":127,\"signal\":null,\"comment\":\"command not found\"},\"\",\"/bin/sh: bonkers: command not found\"]\n    [\"bonkers 2>&1; exit 0\",\"CDX\",{\"code\":0,\"signal\":null,\"comment\":\"ok\"},\"/bin/sh: bonkers: command not found\",\"\"]\n    [\"bonkers; echo \\\"success!\\\"; exit 0\",\"CDDX\",{\"code\":0,\"signal\":null,\"comment\":\"ok\"},\"success!\",\"/bin/sh: bonkers: command not found\"]\n    [\"bonkers; echo \\\"success!\\\"; kill -27 $$\",\"CDDX\",{\"code\":155,\"signal\":\"SIGPROF\",\"comment\":\"SIGPROF\"},\"success!\",\"/bin/sh: bonkers: command not found\"]\n    [\"echo helo\",\"CDX\",{\"code\":0,\"signal\":null,\"comment\":\"ok\"},\"helo\",\"\"]\n    [[\"echo\",\"helo\"],\"CDX\",{\"code\":0,\"signal\":null,\"comment\":\"ok\"},\"helo\",\"\"]\n    [\"bonkers\",\"CDX\",{\"code\":127,\"signal\":null,\"comment\":\"command not found\"},\"\",\"/bin/sh: bonkers: command not found\"]\n    [[\"bonkers\"],\"CDX\",{\"code\":127,\"signal\":null,\"comment\":\"command not found\"},\"\",\"/bin/sh: bonkers: command not found\"]\n    [[\"exit\",\"2\"],\"CX\",{\"code\":2,\"signal\":null,\"comment\":\"error\"},\"\",\"\"]\n    ]\n  #.........................................................................................................\n  tasks = []\n  next  = ->\n    tasks.shift()\n    return T.end() if tasks.length is 0\n    tasks[ 0 ]()\n    # tasks[ 13 ]()\n  #.........................................................................................................\n  for probe_and_matcher in probes_and_matchers\n    do ( probe_and_matcher ) ->\n      [ command, shape_matcher, exit_matcher, out_matcher, err_matcher, ] = probe_and_matcher\n      tasks.push ->\n        # echo '-----------------------------------------------------------------'\n        shape       = []\n        out         = []\n        err         = []\n        exit        = undefined\n        command_ok  = no\n        #...................................................................................................\n        on_stop = PS.new_event_collector 'stop', ->\n          shape   = shape.join ''\n          out     = out.join '\\n'\n          err     = err.join '\\n'\n          T.ok command_ok\n          T.equal shape,  shape_matcher,  \"shape,  shape_matcher\"\n          T.ok ( CND.equals  exit, exit_matcher ), \"exit,   exit_matcher\"\n          T.equal out,    out_matcher,    \"out,    out_matcher\"\n          T.equal err,    err_matcher,    \"err,    err_matcher\"\n          # urge '20911', jr [ command, shape, exit, out, err, ]\n          next()\n        #...................................................................................................\n        source    = PS.spawn command\n        pipeline  = []\n        pipeline.push source\n        pipeline.push PS.$watch ( [ key, value, ] ) ->\n          switch key\n            when 'command'          then  shape.push 'C'\n            when 'stdout', 'stderr' then  shape.push 'D'\n            when 'exit'             then  shape.push 'X'\n            else                          shape.push '?'\n        pipeline.push PS.$watch ( [ key, value, ] ) -> command_ok = yes if key is 'command' and value is command\n        pipeline.push PS.$watch ( [ key, value, ] ) ->\n          switch key\n            when 'stdout' then  out.push value\n            when 'stderr' then  err.push value\n            when 'exit'   then  exit = value\n        # pipeline.push PS.$show()\n        pipeline.push PS.$collect()\n        pipeline.push on_stop.add PS.$drain()\n        PS.pull pipeline...\n  #.........................................................................................................\n  tasks[ 0 ]()\n  # tasks[ 13 ]()\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\nTAP.test \"spawn 3\", ( T ) ->\n  probes_and_matchers = [\n    [\"bonkers; echo \\\"success!\\\"; kill -27 $$\",\"CDX\",{\"code\":155,\"signal\":\"SIGPROF\",\"comment\":\"SIGPROF\",\"error\":\"/bin/sh: bonkers: command not found\"},\"success!\",\"\"]\n    [\"echo \\\"success!\\\"; kill -27 $$\",\"CDX\",{\"code\":155,\"signal\":\"SIGPROF\",\"comment\":\"SIGPROF\",\"error\":null},\"success!\",\"\"]\n    [\"echo \\\"success!\\\"; exit 1\",\"CDX\",{\"code\":1,\"signal\":null,\"comment\":\"error\",\"error\":null},\"success!\",\"\"]\n    [\"echo \\\"success!\\\"; exit 0\",\"CDX\",{\"code\":0,\"signal\":null,\"comment\":\"ok\",\"error\":null},\"success!\",\"\"]\n    [\"1>&2 echo 'problem!'\",\"CX\",{\"code\":0,\"signal\":null,\"comment\":\"ok\",\"error\":\"problem!\"},\"\",\"\"]\n    ]\n  #.........................................................................................................\n  tasks = []\n  next  = ->\n    tasks.shift()\n    return T.end() if tasks.length is 0\n    tasks[ 0 ]()\n    # tasks[ 13 ]()\n  #.........................................................................................................\n  for probe_and_matcher in probes_and_matchers\n    do ( probe_and_matcher ) ->\n      [ command, shape_matcher, exit_matcher, out_matcher, err_matcher, ] = probe_and_matcher\n      tasks.push ->\n        shape       = []\n        out         = []\n        err         = []\n        exit        = undefined\n        #...................................................................................................\n        on_stop   = PS.new_event_collector 'stop', ->\n          shape = shape.join ''\n          out   = out.join '\\n'\n          err   = err.join '\\n'\n          T.equal shape,  shape_matcher,          \"shape,  shape_matcher\"\n          T.ok ( CND.equals exit, exit_matcher ), \"exit,   exit_matcher\"\n          T.equal out,    out_matcher,    \"out,    out_matcher\"\n          T.equal err,    err_matcher,    \"err,    err_matcher\"\n          # debug jr [ command, shape, exit, out, err, ]\n          next()\n        #...................................................................................................\n        source    = PS.spawn command, { error_to_exit: yes, }\n        pipeline  = []\n        pipeline.push source\n        pipeline.push PS.$watch ( [ key, value, ] ) ->\n          switch key\n            when 'command'          then  shape.push 'C'\n            when 'stdout', 'stderr' then  shape.push 'D'\n            when 'exit'             then  shape.push 'X'\n            else                          shape.push '?'\n        pipeline.push PS.$watch ( [ key, value, ] ) ->\n          switch key\n            when 'stdout' then  out.push value\n            when 'stderr' then  err.push value\n            when 'exit'   then  exit = value\n        # pipeline.push PS.$collect()\n        # pipeline.push PS.$show()\n        pipeline.push on_stop.add PS.$drain()\n        PS.pull pipeline...\n  #.........................................................................................................\n  tasks[ 0 ]()\n  # tasks[ 13 ]()\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\nTAP.test \"spawn_collect 1\", ( T ) ->\n  probes_and_matchers = [\n    [\"bonkers; echo \\\"success!\\\"; kill -27 $$\",{\"command\":\"bonkers; echo \\\"success!\\\"; kill -27 $$\",\"stdout\":[\"success!\"],\"stderr\":[\"/bin/sh: bonkers: command not found\"],\"code\":155,\"signal\":\"SIGPROF\",\"comment\":\"SIGPROF\"}]\n    [\"echo \\\"success!\\\"; kill -27 $$\",{\"command\":\"echo \\\"success!\\\"; kill -27 $$\",\"stdout\":[\"success!\"],\"stderr\":[],\"code\":155,\"signal\":\"SIGPROF\",\"comment\":\"SIGPROF\"}]\n    [\"echo \\\"success!\\\"; exit 1\",{\"command\":\"echo \\\"success!\\\"; exit 1\",\"stdout\":[\"success!\"],\"stderr\":[],\"code\":1,\"signal\":null,\"comment\":\"error\"}]\n    [\"echo \\\"success!\\\"; bonkers\",{\"command\":\"echo \\\"success!\\\"; bonkers\",\"stdout\":[\"success!\"],\"stderr\":[\"/bin/sh: bonkers: command not found\"],\"code\":127,\"signal\":null,\"comment\":\"command not found\"}]\n    [\"1>&2 echo 'problem!'\",{\"command\":\"1>&2 echo 'problem!'\",\"stdout\":[],\"stderr\":[\"problem!\"],\"code\":0,\"signal\":null,\"comment\":\"ok\"}]\n    ]\n  #.........................................................................................................\n  tasks = []\n  next  = ->\n    tasks.shift()\n    return T.end() if tasks.length is 0\n    tasks[ 0 ]()\n    # tasks[ 13 ]()\n  #.........................................................................................................\n  for probe_and_matcher in probes_and_matchers\n    do ( probe_and_matcher ) ->\n      [ probe, matcher, ] = probe_and_matcher\n      tasks.push ->\n        #...................................................................................................\n        step ( resume ) ->\n          #.................................................................................................\n          result = yield PS.spawn_collect probe, resume\n          T.ok ( CND.equals result, matcher ), \"result and matcher\"\n          # urge jr [ probe, result, ]\n          next()\n  #.........................................................................................................\n  tasks[ 0 ]()\n  # tasks[ 13 ]()\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\nTAP.test \"spawn_collect with data callback\", ( T ) ->\n  probes_and_matchers = [\n    [\"bonkers; echo \\\"success!\\\"; kill -27 $$\",{\"command\":\"bonkers; echo \\\"success!\\\"; kill -27 $$\",\"stdout\":[],\"stderr\":[],\"code\":155,\"signal\":\"SIGPROF\",\"comment\":\"SIGPROF\"},[[\"stderr\",\"/bin/sh: bonkers: command not found\"],[\"stdout\",\"success!\"]]]\n    [\"echo \\\"success!\\\"; kill -27 $$\",{\"command\":\"echo \\\"success!\\\"; kill -27 $$\",\"stdout\":[],\"stderr\":[],\"code\":155,\"signal\":\"SIGPROF\",\"comment\":\"SIGPROF\"},[[\"stdout\",\"success!\"]]]\n    [\"echo \\\"success!\\\"; exit 1\",{\"command\":\"echo \\\"success!\\\"; exit 1\",\"stdout\":[],\"stderr\":[],\"code\":1,\"signal\":null,\"comment\":\"error\"},[[\"stdout\",\"success!\"]]]\n    [\"echo \\\"success!\\\"; bonkers\",{\"command\":\"echo \\\"success!\\\"; bonkers\",\"stdout\":[],\"stderr\":[],\"code\":127,\"signal\":null,\"comment\":\"command not found\"},[[\"stderr\",\"/bin/sh: bonkers: command not found\"],[\"stdout\",\"success!\"]]]\n    [\"1>&2 echo 'problem!'\",{\"command\":\"1>&2 echo 'problem!'\",\"stdout\":[],\"stderr\":[],\"code\":0,\"signal\":null,\"comment\":\"ok\"},[[\"stderr\",\"problem!\"]]]\n    ]\n  #.........................................................................................................\n  tasks = []\n  next  = ->\n    return T.end() if tasks.length < 1\n    tasks.shift()()\n  #.........................................................................................................\n  for probe_and_matcher in probes_and_matchers\n    do ( probe_and_matcher ) ->\n      [ probe, reply_matcher, events_matcher, ] = probe_and_matcher\n      tasks.push ->\n        #...................................................................................................\n        # echo '---------------------------------------------------------------------------'\n        step ( resume ) ->\n          events = []\n          on_data = ( event ) -> events.push event\n          reply   = yield PS.spawn_collect probe, { on_data, }, resume\n          events.sort()\n          T.ok ( CND.equals reply,  reply_matcher   ), \"reply and reply_matcher\"\n          T.ok ( CND.equals events, events_matcher  ), \"events and events_matcher\"\n          # urge jr [ probe, reply, events, ]\n          next()\n  #.........................................................................................................\n  next()\n  # tasks[ 0 ]()\n  return null\n\n\n\n"
  ]
}