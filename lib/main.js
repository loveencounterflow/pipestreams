// Generated by CoffeeScript 1.12.1
(function() {
  var $split, $stringify, $utf8, CND, STPS, alert, async_map, badge, debug, echo, help, info, log, map, new_file_sink, new_file_source, pull, rpr, through, urge, warn, whisper,
    slice = [].slice;

  CND = require('cnd');

  rpr = CND.rpr;

  badge = 'PIPESTREAMS';

  log = CND.get_logger('plain', badge);

  info = CND.get_logger('info', badge);

  whisper = CND.get_logger('whisper', badge);

  alert = CND.get_logger('alert', badge);

  debug = CND.get_logger('debug', badge);

  warn = CND.get_logger('warn', badge);

  help = CND.get_logger('help', badge);

  urge = CND.get_logger('urge', badge);

  echo = CND.echo.bind(CND);

  new_file_source = require('pull-file');

  new_file_sink = require('pull-write-file');

  $split = require('pull-split');

  $stringify = require('pull-stringify');

  $utf8 = require('pull-utf8-decoder');

  pull = require('pull-stream');

  map = pull.map.bind(pull);


  /* NOTE these two are different: */

  through = require('pull-through');

  async_map = require('pull-stream/throughs/async-map');

  STPS = require('stream-to-pull-stream');

  this.new_file_source = function() {
    var P;
    P = 1 <= arguments.length ? slice.call(arguments, 0) : [];
    return new_file_source.apply(null, P);
  };

  this.new_file_sink = function() {
    var P;
    P = 1 <= arguments.length ? slice.call(arguments, 0) : [];
    return new_file_sink.apply(null, P);
  };

  this.map_start = function(method) {
    var arity, is_first, type;
    if ((type = CND.type_of(method)) !== 'function') {
      throw new Error("expected a function, got a " + type);
    }
    if ((arity = method.length) !== 0) {
      throw new Error("method arity " + arity + " not implemented");
    }
    is_first = true;
    return this.map((function(_this) {
      return function(data) {
        if (is_first) {
          is_first = false;
          method();
        }
        return data;
      };
    })(this));
  };

  this.map_first = function(method) {
    var arity, is_first, send_data, type;
    send_data = null;
    if ((type = CND.type_of(method)) !== 'function') {
      throw new Error("expected a function, got a " + type);
    }
    if ((arity = method.length) !== 1) {
      throw new Error("method arity " + arity + " not implemented");
    }
    is_first = true;
    return this.map((function(_this) {
      return function(data) {
        if (is_first) {
          is_first = false;
          method(data);
        }
        return data;
      };
    })(this));
  };

  this.filter = function(method) {
    var arity, type;
    if ((type = CND.type_of(method)) !== 'function') {
      throw new Error("expected a function, got a " + type);
    }
    switch (arity = method.length) {
      case 1:
        null;
        break;
      default:
        throw new Error("method arity " + arity + " not implemented");
    }
    return pull.filter(method);
  };

  this.map = function(method) {
    var arity, type;
    if ((type = CND.type_of(method)) !== 'function') {
      throw new Error("expected a function, got a " + type);
    }
    switch (arity = method.length) {
      case 1:
        null;
        break;
      default:
        throw new Error("method arity " + arity + " not implemented");
    }
    return map(method);
  };

  this.$ = this.remit = function(method) {
    var R, arity, on_data, self, send, type;
    if ((type = CND.type_of(method)) !== 'function') {
      throw new Error("expected a function, got a " + type);
    }
    switch (arity = method.length) {
      case 2:
        null;
        break;
      default:
        throw new Error("method arity " + arity + " not implemented");
    }
    self = null;
    send = (function(_this) {
      return function(data) {
        return self.queue(data);
      };
    })(this);
    on_data = function(data) {
      self = this;
      return method(data, send);
    };
    R = through(on_data);
    return R;
  };

  this.$async = this.remit_async = function(method) {
    var arity, type;
    if ((type = CND.type_of(method)) !== 'function') {
      throw new Error("expected a function, got a " + type);
    }
    if ((arity = method.length) !== 2) {
      throw new Error("### MEH ###");
    }
  };

}).call(this);

//# sourceMappingURL=main.js.map
