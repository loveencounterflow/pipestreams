{
  "version": 3,
  "file": "tsv.js",
  "sourceRoot": "..",
  "sources": [
    "src/tsv.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n\n\n'use strict'\n\n############################################################################################################\nCND                       = require 'cnd'\nrpr                       = CND.rpr\nbadge                     = 'PIPESTREAMS/TSV'\ndebug                     = CND.get_logger 'debug',     badge\nwarn                      = CND.get_logger 'warn',      badge\ninfo                      = CND.get_logger 'info',      badge\nurge                      = CND.get_logger 'urge',      badge\nhelp                      = CND.get_logger 'help',      badge\nwhisper                   = CND.get_logger 'whisper',   badge\necho                      = CND.echo.bind CND\n\n#-----------------------------------------------------------------------------------------------------------\n@$name_fields = ( names ) ->\n  throw new Error \"µ27276 expected a list, got a #{type}\" unless ( type = CND.type_of names ) is 'list'\n  return @_map_errors ( fields ) =>\n    throw new Error \"µ27597 expected a list, got a #{type}\" unless ( type = CND.type_of fields ) is 'list'\n    R = {}\n    for value, idx in fields\n      name      = names[ idx ] ?= \"field_#{idx}\"\n      R[ name ] = value\n    return R\n\n#-----------------------------------------------------------------------------------------------------------\n@$split_on_tabs = ( settings ) ->\n  return @$ ( line, send ) =>\n    \"µ27918 expected a text, got a #{type}\" unless ( type = CND.type_of line ) is 'text'\n    send line.split /\\t/\n\n#-----------------------------------------------------------------------------------------------------------\n@$split_on_whitespace = ( field_count = null ) ->\n  #.........................................................................................................\n  ### If user requested null or zero fields, we can just split the line: ###\n  if ( not field_count? ) or ( field_count is 0 )\n    return @$ ( line, send ) => send line.split /\\s+/\n  #.........................................................................................................\n  ### If user requested one field, then the entire line is the field: ###\n  if field_count is 1\n    return @$ ( line, send ) => send [ line, ]\n  #.........................................................................................................\n  ### TAINT validate field_count is integer ###\n  ### TAINT validate field_count is non-negative ###\n  return @$ ( line, send ) =>\n    \"µ28239 expected a text, got a #{type}\" unless ( type = CND.type_of line ) is 'text'\n    fields  = []\n    parts   = line.split /(\\s+)/\n    pairs   = ( [ parts[ idx ], parts[ idx + 1 ] ? '' ] for idx in [ 0 ... parts.length ] by +2 )\n    #.......................................................................................................\n    ### Shift-push line contents from `pairs` into `fields` until exhausted or saturated: ###\n    loop\n      break if pairs.length <= 0\n      break if fields.length >= field_count - 1\n      fields.push pairs.shift()[ 0 ]\n    #.......................................................................................................\n    ### Concat remaining parts and add as one more field: ###\n    if pairs.length > 0\n      fields.push ( ( ( fld + spc ) for [ fld, spc, ] in pairs ).join '' ).trim()\n    #.......................................................................................................\n    ### Pad missing fields with `null`: ###\n    ### TAINT allow to configure padding value ###\n    fields.push null while fields.length < field_count\n    #.......................................................................................................\n    send fields\n\n#-----------------------------------------------------------------------------------------------------------\n@$trim_fields = -> @$watch ( fields  ) =>\n  throw new Error \"µ28560 expected a list, got a #{type}\" unless ( type = CND.type_of fields ) is 'list'\n  fields[ idx ] = field.trim() for field, idx in fields\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@$split_tsv = ->\n  R = []\n  R.push @$split()\n  # R.push @$trim()\n  R.push @$skip_blank()\n  ### TAINT use named method; allow to configure comment marker ###\n  R.push @$filter ( line ) -> not line.startsWith '#'\n  R.push @$split_on_tabs()\n  R.push @$trim_fields()\n  return @pull R...\n\n#-----------------------------------------------------------------------------------------------------------\n### TAINT use `settings` for extensibility ###\n@$split_wsv = ( field_count = 0 ) ->\n  R = []\n  R.push @$split()\n  # R.push @$trim()\n  R.push @$skip_blank()\n  ### TAINT use named method; allow to configure comment marker ###\n  R.push @$filter ( line ) -> not line.startsWith '#'\n  R.push @$split_on_whitespace field_count\n  return @pull R...\n\n\n"
  ]
}